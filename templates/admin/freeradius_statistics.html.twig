{% extends 'base.html.twig' %}

{% block title %}Admin Page WBA{% endblock %}

{% block body %}
    <section class="flex text-veryDarkPurple" data-controller="sidebar">
        {% include 'admin/partials/_sidebar.html.twig' %}
        <div class="p-7 w-full bg-lightGray">
            {# Header section #}
            <div class="flex items-center justify-between mb-10" id="header_page">
                {# Header - Title and Buttons #}
                {% include 'admin/partials/_header_admin.html.twig' %}
            </div>
            {# Freeradius Statistics #}
            <div class="flex flex-col lg:flex-row space-y-4 lg:space-y-0 justify-between items-center mb-10">
                <h2 class="text-2xl font-semibold text-center lg:text-left ">
                    Connectivity Statistics
                </h2>
                <form data-controller="date-filter" action="{{ path('admin_dashboard_statistics_freeradius') }}"
                      method="post"
                      class="flex flex-col sm:flex-row items-center gap-2">
                    <input data-date-filter-target="start" type="datetime-local" name="startDate" id="startDate"
                           class="rounded text-sm bg-transparent py-1 px-2 border border-gray-300 focus:ring-0 w-auto"
                           value="{{ selectedStartDate }}"
                           onchange="this.form.submit()">
                    <span class="px-1"> to </span>
                    <input data-date-filter-target="end" type="datetime-local" name="endDate" id="endDate"
                           class="rounded text-sm bg-transparent py-1 px-2 border border-gray-300 focus:ring-0 w-full sm:w-auto"
                           value="{{ selectedEndDate }}"
                           onchange="this.form.submit()">
                </form>
                {% if exportFreeradiusStatistics == constant('App\\Enum\\EmailConfirmationStrategy::EMAIL') %}
                    <div class="flex items-center space-x-6">
                        <a href="{{ path('admin_page_export_freeradius') }}"
                           onclick="return confirm('Are you sure you want to export data' +
                           {% if selectedStartDate and selectedEndDate %}
                               ' from {{ selectedStartDate }} to {{ selectedEndDate }}?'
                           {% else %}
                               '?'
                           {% endif %}
                                   )"
                           class="text-xs text-center bg-veryDarkButton hover:bg-veryDarkButton/80 text-white font-bold p-3 hover:shadow-lg rounded-lg duration-200">
                            Export Statistics
                        </a>
                    </div>
                {% endif %}
            </div>
            {% include 'admin/partials/_freeradius_statistics.html.twig' %}
            <hr class="mb-8 mt-16 w-full h-0.5 bg-gray-300/50 border-0 border-gray-300/50 rounded">
        </div>
    </section>
{% endblock %}
